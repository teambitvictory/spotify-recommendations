{"version":3,"sources":["components/auth/lpimage.svg","services/utils/SpotifyEnv.bs.js","services/authorization/AuthorizationService.bs.js","types/UrlType.bs.js","components/auth/Auth.bs.js","components/person/Person.bs.js","components/about/About.bs.js","state/UserState.bs.js","state/TokenState.bs.js","components/user/UserComponent.bs.js","components/header/Header.bs.js","util/ItemUtil.bs.js","components/item/ItemComponent.bs.js","state/SelectionState.bs.js","components/creation/search/SearchItem.bs.js","components/creation/top/Top.bs.js","components/creation/genres/Genres.bs.js","components/creation/search/Search.bs.js","util/Hooks.bs.js","components/creation/selection/SelectionItem.bs.js","components/creation/selection/Selection.bs.js","state/RecommendationsState.bs.js","components/creation/Creation.bs.js","services/utils/RequestMapper.bs.js","services/user/UserService.bs.js","services/genres/GenresService.bs.js","services/utils/ModelMapper.bs.js","services/search/SearchService.bs.js","services/playlist/PlaylistService.bs.js","services/recomendations/RecommendationService.bs.js","services/personalization/PersonalizationService.bs.js","components/recommendations/Recommendations.bs.js","components/dashboard/Dashboard.bs.js","services/SpotifyService.bs.js","components/main/MainContainer.bs.js","components/app/App.bs.js","components/index/Index.bs.js","bindings/ReactDomExperimental.bs.js","reportWebVitals.js","index.js"],"names":["stateIdKey","stateId","param","sessionId","localStorage","getItem","uuid","V4","setItem","authorizeUrl","String","URLSearchParams","client_id","response_type","redirect_uri","scope","state","getTokenFromCallback","parameter","Belt_HashMapString","Belt_Array","window","location","hash","slice","split","s","a","length","p","undefined","SpotifyEnv$Spotigen","url","origin","console","log","history","replaceState","UrlType$Spotigen","t","logo","LpimageSvg","make","Props","React","className","style","maxWidth","alt","src","Core","children","variant","marginBottom","href","target","onClick","replace","color","name","image","item","Caml_option","normalize","margin","width","Person$Spotigen","userState","Recoil","key","default","id","tokenState","setToken","TokenState$Spotigen","user","UserState$Spotigen","$$event","preventDefault","Curry","authenticated","UserComponent$Spotigen","extractItemInfo","match","exit","TAG","match$1","_0","match$2","showGenreLabel","control","artists","artist","description","tmp","tmp$1","selectionState","added","setSelected","SelectionState$Spotigen","itemId","ItemUtil$Spotigen","currentSelection","Check","Add","ItemComponent$Spotigen","items","selected","itemToCheck","SearchItem$Spotigen","setSearchTerm","searchTerm","autoComplete","onChange","value","placeholder","type","MaterialUi_TextField","string","toLowerCase","includes","spotifyClient","debouncedSearchTerm","delay","setDebouncedValue","handler","setTimeout","clearTimeout","Hooks$Spotigen","setItems","Future","getSearch","response","results","onRemove","Clear","removeItem","SelectionItem$Spotigen","recommendationsState","onSeedTooSmall","setSelectedTab","selectedTab","setGenres","setTopTracks","match$3","setTopArtists","setRecommendations","RecommendationsState$Spotigen","getGenres","getTopTracks","getTopArtists","Search$Spotigen","Top$Spotigen","Genres$Spotigen","indicatorColor","newTab","MaterialUi","scrollButtons","textColor","label","Selection$Spotigen","getRecommendation","disabled","mapError","error","mapToUser","responseUser","images","display_name","mapResponseToItem","status","message","response$1","init","token","authHeader","Js_dict","$$Request","RequestMapper$Spotigen","mapGenresKeyToGenresItem","gKey","toUpperCase","genres","getSmallestImage","startImg","height","b","mapSearchArtistToItemArtist","mapSearchTrackToItemTrack","track","album","uri","ModelMapper$Spotigen","tracks","firstArtist","query","queryParam","q","limit","createPlaylistMapping","generateTrackQueryParam","seedTracks","join","getTrackUris","addTracksMapping","userId","playlistName","dict","body","JSON","stringify","createPlaylist","createdPlaylist","playlistId","addTracks","getSeedItems","itemType","shuffledItems","requests","Js_math","idx","offset","Math","imul","numberOfRemainingItems","n","amount","seedArtists","seedGenres","generateQueryParam","resultMap","result","totalSeedSize","numberOfTracksToSelect","seeds","err","find","mapTrackResponseToItem","responseBody","mapArtistResponseToItem","initTopTracks","initTopArtist","onPlaylistCreated","setPlaylistName","startIcon","ArrowBack","marginRight","flex","recommendations","setUser","setSnackbarMessage","snackbarMessage","SearchService$Spotigen","GenresService$Spotigen","RecommendationService$Spotigen","PlaylistService$Spotigen","getUser","UserService$Spotigen","PersonalizationService$Spotigen","SpotifyService$Spotigen","Recommendations$Spotigen","Creation$Spotigen","autoHideDuration","MaterialUi_Types","$$int","Lab","onClose","severity","param$1","open","AuthorizationService$Spotigen","Header$Spotigen","Dashboard$Spotigen","Auth$Spotigen","MaterialUi_Container","sm","About$Spotigen","MainContainer$Spotigen","root","element","document","getElementById","ReactDom","ReactDomExperimental$Spotigen","render","App$Spotigen","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","reportWebVitals"],"mappings":"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","file":"static/js/main.cc207dbd.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/lpimage.7c8aaed5.svg\";","\n\nimport * as V4 from \"uuid/v4\";\n\nvar clientId = \"2e53e2a82ee64c4dbf48f4936ae1bb02\";\n\nvar stateIdKey = \"sessionId\";\n\nvar baseUrl = \"https://api.spotify.com/v1\";\n\nvar searchUrl = \"https://api.spotify.com/v1/search?\";\n\nvar genresUrl = \"https://api.spotify.com/v1/recommendations/available-genre-seeds\";\n\nvar recommendationUrl = \"https://api.spotify.com/v1/recommendations?\";\n\nvar userUrl = \"https://api.spotify.com/v1/me\";\n\nvar usersUrl = \"https://api.spotify.com/v1/users/\";\n\nvar playlistsUrl = \"https://api.spotify.com/v1/playlists/\";\n\nvar topArtistsEndpoint = \"https://api.spotify.com/v1/me/top/artists?\";\n\nvar topTracksEndpoint = \"https://api.spotify.com/v1/me/top/tracks?\";\n\nfunction stateId(param) {\n  var sessionId = localStorage.getItem(stateIdKey);\n  if (sessionId !== null) {\n    return sessionId;\n  }\n  var uuid = V4();\n  localStorage.setItem(stateIdKey, uuid);\n  return uuid;\n}\n\nvar authParams = String(new URLSearchParams({\n          client_id: clientId,\n          response_type: \"token\",\n          redirect_uri: process.env.NODE_ENV === \"development\" ? \"http://localhost:3000/\" : \"https://spotigen.bitvictory.dev\",\n          scope: \"playlist-modify-private,user-top-read\",\n          state: stateId(undefined)\n        }));\n\nvar authorizeUrl = \"https://accounts.spotify.com/authorize?\" + authParams;\n\nvar tokenKey = \"accessToken\";\n\nvar playlistsEndpoint = \"/playlists\";\n\nvar tracksEndpoint = \"/tracks?\";\n\nexport {\n  clientId ,\n  stateIdKey ,\n  tokenKey ,\n  baseUrl ,\n  searchUrl ,\n  genresUrl ,\n  recommendationUrl ,\n  userUrl ,\n  usersUrl ,\n  playlistsEndpoint ,\n  playlistsUrl ,\n  tracksEndpoint ,\n  topArtistsEndpoint ,\n  topTracksEndpoint ,\n  stateId ,\n  authParams ,\n  authorizeUrl ,\n  \n}\n/* authParams Not a pure module */\n","\n\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as UrlType$Spotigen from \"../../types/UrlType.bs.js\";\nimport * as Belt_HashMapString from \"bs-platform/lib/es6/belt_HashMapString.js\";\nimport * as SpotifyEnv$Spotigen from \"../utils/SpotifyEnv.bs.js\";\n\nfunction authorize(param) {\n  window.location.replace(SpotifyEnv$Spotigen.authorizeUrl);\n  \n}\n\nfunction getTokenFromCallback(param) {\n  var parameter = Belt_HashMapString.fromArray(Belt_Array.map(Belt_Array.keep(Belt_Array.map(window.location.hash.slice(1).split(\"&\"), (function (s) {\n                      return s.split(\"=\");\n                    })), (function (a) {\n                  return a.length === 2;\n                })), (function (p) {\n              return [\n                      p[0],\n                      String(p[1])\n                    ];\n            })));\n  var s = Belt_HashMapString.get(parameter, \"state\");\n  if (s === undefined) {\n    return ;\n  }\n  if (s !== SpotifyEnv$Spotigen.stateId(undefined)) {\n    return ;\n  }\n  UrlType$Spotigen.removeUrlAnchor(undefined);\n  var t = Belt_HashMapString.get(parameter, \"access_token\");\n  if (t !== undefined) {\n    return t;\n  }\n  \n}\n\nexport {\n  authorize ,\n  getTokenFromCallback ,\n  \n}\n/* SpotifyEnv-Spotigen Not a pure module */\n","\n\n\nfunction removeUrlAnchor(param) {\n  var url = window.location.origin;\n  console.log(url);\n  window.history.replaceState(window.history.state, \"\", url);\n  \n}\n\nexport {\n  removeUrlAnchor ,\n  \n}\n/* No side effect */\n","\n\nimport * as React from \"react\";\nimport LpimageSvg from \"./lpimage.svg\";\nimport * as Core from \"@material-ui/core\";\nimport * as AuthorizationService$Spotigen from \"../../services/authorization/AuthorizationService.bs.js\";\n\nvar logo = LpimageSvg;\n\nfunction Auth(Props) {\n  var connectSpotify = function (param) {\n    return AuthorizationService$Spotigen.authorize(undefined);\n  };\n  return React.createElement(\"div\", {\n              className: \"landing\"\n            }, React.createElement(\"div\", {\n                  className: \"spacing\"\n                }, React.createElement(\"img\", {\n                      style: {\n                        maxWidth: \"70%\"\n                      },\n                      alt: \"logo\",\n                      src: logo\n                    }), React.createElement(Core.Typography, {\n                      children: \"Welcome to spotigen\",\n                      className: \"spacing\",\n                      variant: \"h4\"\n                    }), React.createElement(\"br\", undefined), React.createElement(Core.Typography, {\n                      children: \"Create playlists with recommendations based on your favourite tracks, artists and genres.\",\n                      className: \"spacing\",\n                      style: {\n                        marginBottom: \"64px\"\n                      }\n                    }), React.createElement(Core.Typography, {\n                      children: null,\n                      className: \"spacing\",\n                      style: {\n                        marginBottom: \"16px\"\n                      }\n                    }, \"By connecting your Spotify account, you agree to our \", React.createElement(Core.Link, {\n                          children: \"privacy policy\",\n                          href: \"https://bitvictory.de/spotigen/privacy.md\",\n                          target: \"_blank\"\n                        })), React.createElement(Core.Button, {\n                      onClick: connectSpotify,\n                      children: \"Login with Spotify\",\n                      color: \"primary\",\n                      variant: \"contained\"\n                    })));\n}\n\nvar make = Auth;\n\nexport {\n  logo ,\n  make ,\n  \n}\n/* logo Not a pure module */\n","\n\nimport * as React from \"react\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as Core from \"@material-ui/core\";\n\nimport './Person.css';\n;\n\nfunction Person(Props) {\n  var name = Props.name;\n  var image = Props.image;\n  var item = Props.item;\n  return React.createElement(\"div\", {\n              className: \"person\"\n            }, image !== undefined ? React.createElement(Core.Avatar, {\n                    alt: name,\n                    src: image\n                  }) : React.createElement(Core.Avatar, {\n                    children: name[0]\n                  }), React.createElement(\"div\", {\n                  className: \"person-name\"\n                }, item !== undefined ? Caml_option.valFromOption(item) : React.createElement(Core.Typography, {\n                        children: name\n                      })));\n}\n\nvar make = Person;\n\nexport {\n  make ,\n  \n}\n/*  Not a pure module */\n","\n\nimport * as React from \"react\";\nimport * as Person$Spotigen from \"../person/Person.bs.js\";\nimport * as Core from \"@material-ui/core\";\n\nfunction About(Props) {\n  return React.createElement(\"div\", {\n              className: \"footer\"\n            }, React.createElement(Core.Typography, {\n                  children: \"Created with ❤️ in Mannheim\".normalize()\n                }), React.createElement(Core.Typography, {\n                  children: null\n                }, React.createElement(Core.Link, {\n                      children: \"Github\",\n                      href: \"https://github.com/teambitvictory/spotigen\",\n                      target: \"_blank\"\n                    }), \" | \", React.createElement(Core.Link, {\n                      children: \"Privacy Policy\",\n                      href: \"https://bitvictory.de/spotigen/privacy.md\",\n                      target: \"_blank\"\n                    }), \" | \", React.createElement(Core.Link, {\n                      children: \"Imprint\",\n                      href: \"https://bitvictory.de/spotigen/imprint.md\",\n                      target: \"_blank\"\n                    })), React.createElement(\"div\", {\n                  style: {\n                    margin: \"auto\",\n                    width: \"180px\"\n                  }\n                }, React.createElement(Person$Spotigen.make, {\n                      name: \"Damien Jochim\",\n                      image: \"https://pbs.twimg.com/profile_images/1284521496438874112/LDA9UyiN_400x400.jpg\",\n                      item: React.createElement(Core.Link, {\n                            children: \"@damien_jochim\",\n                            href: \"https://twitter.com/damien_jochim\",\n                            target: \"_blank\"\n                          })\n                    }), React.createElement(Person$Spotigen.make, {\n                      name: \"Stefan Blamberg\",\n                      image: \"https://pbs.twimg.com/profile_images/1328445229221949442/1uPmXD13_400x400.jpg\",\n                      item: React.createElement(Core.Link, {\n                            children: \"@StefanBlamberg\",\n                            href: \"https://twitter.com/StefanBlamberg\",\n                            target: \"_blank\"\n                          })\n                    })));\n}\n\nvar make = About;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as Recoil from \"recoil\";\n\nvar userState = Recoil.atom({\n      key: \"userState\",\n      default: {\n        id: \"guest\",\n        name: \"Guest\",\n        image: \"\"\n      }\n    });\n\nexport {\n  userState ,\n  \n}\n/* userState Not a pure module */\n","\n\nimport * as Recoil from \"recoil\";\n\nvar tokenState = Recoil.atom({\n      key: \"tokenState\",\n      default: \"\"\n    });\n\nexport {\n  tokenState ,\n  \n}\n/* tokenState Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Recoil from \"recoil\";\nimport * as Person$Spotigen from \"../person/Person.bs.js\";\nimport * as Core from \"@material-ui/core\";\nimport * as UserState$Spotigen from \"../../state/UserState.bs.js\";\nimport * as TokenState$Spotigen from \"../../state/TokenState.bs.js\";\n\nfunction UserComponent(Props) {\n  var match = Recoil.useRecoilState(TokenState$Spotigen.tokenState);\n  var setToken = match[1];\n  var user = Recoil.useRecoilValue(UserState$Spotigen.userState);\n  var logout = function ($$event) {\n    $$event.preventDefault();\n    return Curry._1(setToken, (function (param) {\n                  return \"\";\n                }));\n  };\n  return React.createElement(\"div\", {\n              className: \"hbox\"\n            }, React.createElement(Person$Spotigen.make, {\n                  name: user.name,\n                  image: user.image,\n                  item: React.createElement(Core.Typography, {\n                        children: null\n                      }, user.name + \" | \", React.createElement(Core.Link, {\n                            children: \"Logout\",\n                            onClick: logout,\n                            href: \"#\"\n                          }))\n                }));\n}\n\nvar make = UserComponent;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as React from \"react\";\nimport * as Core from \"@material-ui/core\";\nimport * as UserComponent$Spotigen from \"../user/UserComponent.bs.js\";\n\nimport './Header.css';\n;\n\nfunction Header(Props) {\n  var authenticated = Props.authenticated;\n  return React.createElement(\"div\", {\n              className: \"header\"\n            }, React.createElement(Core.Typography, {\n                  children: \"spotigen\"\n                }), authenticated ? React.createElement(UserComponent$Spotigen.make, {}) : null);\n}\n\nvar make = Header;\n\nexport {\n  make ,\n  \n}\n/*  Not a pure module */\n","\n\n\nfunction extractItemInfo(item) {\n  var match;\n  var exit = 0;\n  switch (item.TAG | 0) {\n    case /* Genre */0 :\n    case /* Artist */1 :\n        exit = 1;\n        break;\n    case /* Track */2 :\n        var match$1 = item._0;\n        match = [\n          match$1.id,\n          match$1.name\n        ];\n        break;\n    \n  }\n  if (exit === 1) {\n    var match$2 = item._0;\n    match = [\n      match$2.id,\n      match$2.name\n    ];\n  }\n  return [\n          item,\n          match[0],\n          match[1]\n        ];\n}\n\nexport {\n  extractItemInfo ,\n  \n}\n/* No side effect */\n","\n\nimport * as React from \"react\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Core from \"@material-ui/core\";\n\nimport './Item.css';\n;\n\nfunction ItemComponent(Props) {\n  var item = Props.item;\n  var showGenreLabel = Props.showGenreLabel;\n  var control = Props.control;\n  var match;\n  switch (item.TAG | 0) {\n    case /* Genre */0 :\n        match = [\n          item._0.name,\n          \"\",\n          showGenreLabel ? \"Genre\" : \"\"\n        ];\n        break;\n    case /* Artist */1 :\n        var match$1 = item._0;\n        match = [\n          match$1.name,\n          match$1.image,\n          \"Artist\"\n        ];\n        break;\n    case /* Track */2 :\n        var match$2 = item._0;\n        match = [\n          match$2.name,\n          match$2.image,\n          \"Track by \" + Belt_Array.joinWith(match$2.artists, \", \", (function (artist) {\n                  return artist.name;\n                }))\n        ];\n        break;\n    \n  }\n  var description = match[2];\n  var image = match[1];\n  var name = match[0];\n  var tmp = image === \"\" ? React.createElement(Core.Avatar, {\n          children: name[0],\n          className: \"cover\",\n          variant: \"square\"\n        }) : React.createElement(\"img\", {\n          className: \"cover\",\n          src: image\n        });\n  var tmp$1 = description === \"\" ? null : React.createElement(Core.Typography, {\n          children: description,\n          className: \"description\"\n        });\n  return React.createElement(\"div\", {\n              className: \"item\"\n            }, tmp, React.createElement(\"div\", {\n                  className: \"caption\"\n                }, React.createElement(Core.Typography, {\n                      children: name\n                    }), tmp$1), control);\n}\n\nvar make = ItemComponent;\n\nexport {\n  make ,\n  \n}\n/*  Not a pure module */\n","\n\nimport * as Recoil from \"recoil\";\n\nvar selectionState = Recoil.atom({\n      key: \"selectionState\",\n      default: []\n    });\n\nexport {\n  selectionState ,\n  \n}\n/* selectionState Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Recoil from \"recoil\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Core from \"@material-ui/core\";\nimport * as ItemUtil$Spotigen from \"../../../util/ItemUtil.bs.js\";\nimport Add from \"@material-ui/icons/Add\";\nimport * as ItemComponent$Spotigen from \"../../item/ItemComponent.bs.js\";\nimport * as SelectionState$Spotigen from \"../../../state/SelectionState.bs.js\";\nimport Check from \"@material-ui/icons/Check\";\n\nfunction SearchItem(Props) {\n  var item = Props.item;\n  var added = Props.added;\n  var match = Recoil.useRecoilState(SelectionState$Spotigen.selectionState);\n  var setSelected = match[1];\n  var addItem = function (param) {\n    return Curry._1(setSelected, (function (currentSelection) {\n                  return Belt_Array.concat(currentSelection, [item]);\n                }));\n  };\n  var removeItem = function (param) {\n    var match = ItemUtil$Spotigen.extractItemInfo(item);\n    var itemId = match[1];\n    return Curry._1(setSelected, (function (currentSelection) {\n                  return Belt_Array.keep(currentSelection, (function (item) {\n                                var match = ItemUtil$Spotigen.extractItemInfo(item);\n                                return match[1] !== itemId;\n                              }));\n                }));\n  };\n  var control = added ? React.createElement(Core.IconButton, {\n          onClick: removeItem,\n          children: React.createElement(Check, {})\n        }) : React.createElement(Core.IconButton, {\n          onClick: addItem,\n          children: React.createElement(Add, {})\n        });\n  return React.createElement(ItemComponent$Spotigen.make, {\n              item: item,\n              showGenreLabel: false,\n              control: control\n            });\n}\n\nvar make = SearchItem;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as React from \"react\";\nimport * as Recoil from \"recoil\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as ItemUtil$Spotigen from \"../../../util/ItemUtil.bs.js\";\nimport * as SearchItem$Spotigen from \"../search/SearchItem.bs.js\";\nimport * as SelectionState$Spotigen from \"../../../state/SelectionState.bs.js\";\n\nfunction Top(Props) {\n  var items = Props.items;\n  var selected = Recoil.useRecoilValue(SelectionState$Spotigen.selectionState);\n  return React.createElement(\"div\", {\n              className: \"spacing\"\n            }, Belt_Array.map(Belt_Array.map(items, ItemUtil$Spotigen.extractItemInfo), (function (param) {\n                    var id = param[1];\n                    var added = Belt_Array.some(selected, (function (itemToCheck) {\n                            var match = ItemUtil$Spotigen.extractItemInfo(itemToCheck);\n                            return match[1] === id;\n                          }));\n                    return React.createElement(SearchItem$Spotigen.make, {\n                                item: param[0],\n                                added: added,\n                                key: id\n                              });\n                  })));\n}\n\nvar make = Top;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Recoil from \"recoil\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Core from \"@material-ui/core\";\nimport * as ItemUtil$Spotigen from \"../../../util/ItemUtil.bs.js\";\nimport * as SearchItem$Spotigen from \"../search/SearchItem.bs.js\";\nimport * as MaterialUi_TextField from \"@jsiebern/bs-material-ui/src/MaterialUi_TextField.bs.js\";\nimport * as SelectionState$Spotigen from \"../../../state/SelectionState.bs.js\";\n\nfunction Genres(Props) {\n  var items = Props.items;\n  var match = React.useState(function () {\n        return \"\";\n      });\n  var setSearchTerm = match[1];\n  var searchTerm = match[0];\n  var selected = Recoil.useRecoilValue(SelectionState$Spotigen.selectionState);\n  var changeSearchTerm = function ($$event) {\n    return Curry._1(setSearchTerm, $$event.target.value);\n  };\n  return React.createElement(\"div\", undefined, React.createElement(\"form\", {\n                  autoComplete: \"off\"\n                }, React.createElement(Core.TextField, {\n                      className: \"input\",\n                      onChange: changeSearchTerm,\n                      placeholder: \"Search\",\n                      type: \"search\",\n                      value: MaterialUi_TextField.Value.string(searchTerm),\n                      variant: \"outlined\"\n                    })), React.createElement(\"div\", {\n                  className: \"spacing\"\n                }, searchTerm.length !== 0 ? Belt_Array.map(Belt_Array.keep(Belt_Array.map(items, ItemUtil$Spotigen.extractItemInfo), (function (param) {\n                              if (searchTerm !== \"\") {\n                                return param[2].toLowerCase().includes(searchTerm);\n                              } else {\n                                return false;\n                              }\n                            })), (function (param) {\n                          var id = param[1];\n                          var added = Belt_Array.some(selected, (function (itemToCheck) {\n                                  var match = ItemUtil$Spotigen.extractItemInfo(itemToCheck);\n                                  return match[1] === id;\n                                }));\n                          return React.createElement(SearchItem$Spotigen.make, {\n                                      item: param[0],\n                                      added: added,\n                                      key: id\n                                    });\n                        })) : React.createElement(Core.Typography, {\n                        children: \"Enter a search term to select genres\",\n                        style: {\n                          color: \"grey\"\n                        }\n                      })));\n}\n\nvar make = Genres;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Recoil from \"recoil\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Hooks$Spotigen from \"../../../util/Hooks.bs.js\";\nimport * as Core from \"@material-ui/core\";\nimport * as ItemUtil$Spotigen from \"../../../util/ItemUtil.bs.js\";\nimport * as SearchItem$Spotigen from \"./SearchItem.bs.js\";\nimport * as MaterialUi_TextField from \"@jsiebern/bs-material-ui/src/MaterialUi_TextField.bs.js\";\nimport * as SelectionState$Spotigen from \"../../../state/SelectionState.bs.js\";\n\nfunction Search(Props) {\n  var spotifyClient = Props.spotifyClient;\n  var match = React.useState(function () {\n        return \"\";\n      });\n  var setSearchTerm = match[1];\n  var searchTerm = match[0];\n  var debouncedSearchTerm = Hooks$Spotigen.useDebounce(searchTerm, 400);\n  var match$1 = React.useState(function () {\n        return [];\n      });\n  var setItems = match$1[1];\n  var items = match$1[0];\n  var selected = Recoil.useRecoilValue(SelectionState$Spotigen.selectionState);\n  var changeSearchTerm = function ($$event) {\n    return Curry._1(setSearchTerm, $$event.target.value);\n  };\n  React.useEffect((function () {\n          if (debouncedSearchTerm === \"\") {\n            Curry._1(setItems, (function (param) {\n                    return [];\n                  }));\n          } else {\n            Future.get(Curry._1(spotifyClient.getSearch, debouncedSearchTerm), (function (response) {\n                    if (response.TAG === /* Ok */0) {\n                      var results = response._0;\n                      return Curry._1(setItems, (function (param) {\n                                    return results;\n                                  }));\n                    }\n                    console.log(response._0);\n                    \n                  }));\n          }\n          \n        }), [debouncedSearchTerm]);\n  return React.createElement(\"div\", undefined, React.createElement(\"form\", {\n                  autoComplete: \"off\"\n                }, React.createElement(Core.TextField, {\n                      className: \"input\",\n                      onChange: changeSearchTerm,\n                      placeholder: \"Search\",\n                      type: \"search\",\n                      value: MaterialUi_TextField.Value.string(searchTerm),\n                      variant: \"outlined\"\n                    })), React.createElement(\"div\", {\n                  className: \"spacing\"\n                }, items.length !== 0 ? Belt_Array.map(items, (function (item) {\n                          var match = ItemUtil$Spotigen.extractItemInfo(item);\n                          var id = match[1];\n                          var added = Belt_Array.some(selected, (function (itemToCheck) {\n                                  var match = ItemUtil$Spotigen.extractItemInfo(itemToCheck);\n                                  return match[1] === id;\n                                }));\n                          return React.createElement(SearchItem$Spotigen.make, {\n                                      item: item,\n                                      added: added,\n                                      key: id\n                                    });\n                        })) : React.createElement(Core.Typography, {\n                        children: \"Enter a search term to select items\",\n                        style: {\n                          color: \"grey\"\n                        }\n                      })));\n}\n\nvar make = Search;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\n\nfunction useDebounce(value, delay) {\n  var match = React.useState(function () {\n        return value;\n      });\n  var setDebouncedValue = match[1];\n  React.useEffect((function () {\n          var handler = setTimeout((function (param) {\n                  return Curry._1(setDebouncedValue, (function (param) {\n                                return value;\n                              }));\n                }), delay);\n          return (function (param) {\n                    clearTimeout(handler);\n                    \n                  });\n        }), [value]);\n  return match[0];\n}\n\nexport {\n  useDebounce ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Core from \"@material-ui/core\";\nimport * as ItemComponent$Spotigen from \"../../item/ItemComponent.bs.js\";\nimport Clear from \"@material-ui/icons/Clear\";\n\nfunction SelectionItem(Props) {\n  var item = Props.item;\n  var id = Props.id;\n  var onRemove = Props.onRemove;\n  var removeItem = function (param) {\n    return Curry._1(onRemove, id);\n  };\n  return React.createElement(ItemComponent$Spotigen.make, {\n              item: item,\n              showGenreLabel: true,\n              control: React.createElement(Core.IconButton, {\n                    onClick: removeItem,\n                    children: React.createElement(Clear, {})\n                  })\n            });\n}\n\nvar make = SelectionItem;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Recoil from \"recoil\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Core from \"@material-ui/core\";\nimport * as ItemUtil$Spotigen from \"../../../util/ItemUtil.bs.js\";\nimport * as SelectionItem$Spotigen from \"./SelectionItem.bs.js\";\nimport * as SelectionState$Spotigen from \"../../../state/SelectionState.bs.js\";\n\nfunction $$Selection(Props) {\n  var match = Recoil.useRecoilState(SelectionState$Spotigen.selectionState);\n  var setItems = match[1];\n  var items = match[0];\n  var removeItem = function (itemId) {\n    return Curry._1(setItems, (function (currentSelection) {\n                  return Belt_Array.keep(currentSelection, (function (item) {\n                                var match = ItemUtil$Spotigen.extractItemInfo(item);\n                                return match[1] !== itemId;\n                              }));\n                }));\n  };\n  return React.createElement(\"div\", {\n              className: \"spacing\"\n            }, items.length !== 0 ? Belt_Array.map(items, (function (item) {\n                      var match = ItemUtil$Spotigen.extractItemInfo(item);\n                      var id = match[1];\n                      return React.createElement(SelectionItem$Spotigen.make, {\n                                  item: item,\n                                  id: id,\n                                  onRemove: removeItem,\n                                  key: id\n                                });\n                    })) : React.createElement(Core.Typography, {\n                    children: \"Select at least one item to generate recommendations\",\n                    style: {\n                      color: \"grey\"\n                    }\n                  }));\n}\n\nvar make = $$Selection;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as Recoil from \"recoil\";\n\nvar recommendationsState = Recoil.atom({\n      key: \"recommendationsState\",\n      default: []\n    });\n\nexport {\n  recommendationsState ,\n  \n}\n/* recommendationsState Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Recoil from \"recoil\";\nimport * as MaterialUi from \"@jsiebern/bs-material-ui/src/MaterialUi.bs.js\";\nimport * as Top$Spotigen from \"./top/Top.bs.js\";\nimport * as Genres$Spotigen from \"./genres/Genres.bs.js\";\nimport * as Search$Spotigen from \"./search/Search.bs.js\";\nimport * as Core from \"@material-ui/core\";\nimport * as Selection$Spotigen from \"./selection/Selection.bs.js\";\nimport * as SelectionState$Spotigen from \"../../state/SelectionState.bs.js\";\nimport * as RecommendationsState$Spotigen from \"../../state/RecommendationsState.bs.js\";\n\nfunction Creation(Props) {\n  var spotifyClient = Props.spotifyClient;\n  var onSeedTooSmall = Props.onSeedTooSmall;\n  var match = React.useState(function () {\n        return 0;\n      });\n  var setSelectedTab = match[1];\n  var selectedTab = match[0];\n  var match$1 = React.useState(function () {\n        return [];\n      });\n  var setGenres = match$1[1];\n  var match$2 = React.useState(function () {\n        return [];\n      });\n  var setTopTracks = match$2[1];\n  var match$3 = React.useState(function () {\n        return [];\n      });\n  var setTopArtists = match$3[1];\n  var selected = Recoil.useRecoilValue(SelectionState$Spotigen.selectionState);\n  var match$4 = Recoil.useRecoilState(RecommendationsState$Spotigen.recommendationsState);\n  var setRecommendations = match$4[1];\n  React.useEffect((function () {\n          Future.get(Curry._1(spotifyClient.getGenres, undefined), (function (response) {\n                  if (response.TAG === /* Ok */0) {\n                    var results = response._0;\n                    return Curry._1(setGenres, (function (param) {\n                                  return results;\n                                }));\n                  }\n                  console.log(response._0);\n                  \n                }));\n          Future.get(Curry._1(spotifyClient.getTopTracks, undefined), (function (response) {\n                  if (response.TAG === /* Ok */0) {\n                    var results = response._0;\n                    return Curry._1(setTopTracks, (function (param) {\n                                  return results;\n                                }));\n                  }\n                  console.log(response._0);\n                  \n                }));\n          Future.get(Curry._1(spotifyClient.getTopArtists, undefined), (function (response) {\n                  if (response.TAG === /* Ok */0) {\n                    var results = response._0;\n                    return Curry._1(setTopArtists, (function (param) {\n                                  return results;\n                                }));\n                  }\n                  console.log(response._0);\n                  \n                }));\n          \n        }), []);\n  var generate = function (param) {\n    return Future.get(Curry._1(spotifyClient.getRecommendation, selected), (function (response) {\n                  if (response.TAG === /* Ok */0) {\n                    var results = response._0;\n                    if (results.length !== 0) {\n                      return Curry._1(setRecommendations, (function (param) {\n                                    return results;\n                                  }));\n                    } else {\n                      return Curry._1(onSeedTooSmall, undefined);\n                    }\n                  }\n                  console.log(response._0);\n                  \n                }));\n  };\n  var selectTab = function (param, newTab) {\n    return Curry._1(setSelectedTab, (function (param) {\n                  return MaterialUi.anyUnpack(newTab);\n                }));\n  };\n  var tmp;\n  switch (selectedTab) {\n    case 0 :\n        tmp = React.createElement(Search$Spotigen.make, {\n              spotifyClient: spotifyClient\n            });\n        break;\n    case 1 :\n        tmp = React.createElement(Top$Spotigen.make, {\n              items: match$2[0]\n            });\n        break;\n    case 2 :\n        tmp = React.createElement(Top$Spotigen.make, {\n              items: match$3[0]\n            });\n        break;\n    case 3 :\n        tmp = React.createElement(Genres$Spotigen.make, {\n              items: match$1[0]\n            });\n        break;\n    default:\n      tmp = null;\n  }\n  return React.createElement(\"div\", undefined, React.createElement(Core.Typography, {\n                  children: \"Get started\",\n                  className: \"spacing\",\n                  variant: \"h4\"\n                }), React.createElement(Core.Typography, {\n                  children: \"Choose tracks, genres and artists as a base for your recommendations\"\n                }), React.createElement(Core.Tabs, {\n                  children: null,\n                  className: \"spacing\",\n                  indicatorColor: \"primary\",\n                  onChange: selectTab,\n                  scrollButtons: \"on\",\n                  textColor: \"primary\",\n                  value: selectedTab,\n                  variant: \"scrollable\"\n                }, React.createElement(Core.Tab, {\n                      label: \"Search\"\n                    }), React.createElement(Core.Tab, {\n                      label: \"Top tracks\"\n                    }), React.createElement(Core.Tab, {\n                      label: \"Top artists\"\n                    }), React.createElement(Core.Tab, {\n                      label: \"Genres\"\n                    })), tmp, React.createElement(Core.Typography, {\n                  children: \"Your selection\",\n                  variant: \"h4\"\n                }), React.createElement(Selection$Spotigen.make, {}), React.createElement(Core.Button, {\n                  onClick: generate,\n                  children: \"Generate recommendations\",\n                  color: \"primary\",\n                  disabled: selected.length === 0,\n                  variant: \"contained\"\n                }));\n}\n\nvar make = Creation;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\n\nfunction mapError(error) {\n  if (error === \"Timeout\") {\n    return /* Timeout */2;\n  } else {\n    return /* NetworkError */1;\n  }\n}\n\nfunction emptyToError(param) {\n  var response = param.response;\n  if (response !== undefined) {\n    return {\n            TAG: /* Ok */0,\n            _0: Caml_option.valFromOption(response)\n          };\n  } else {\n    return {\n            TAG: /* Error */1,\n            _0: /* Empty */0\n          };\n  }\n}\n\nexport {\n  mapError ,\n  emptyToError ,\n  \n}\n/* No side effect */\n","\n\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as $$Request from \"rescript-request/src/Request.bs.js\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as SpotifyEnv$Spotigen from \"../utils/SpotifyEnv.bs.js\";\nimport * as RequestMapper$Spotigen from \"../utils/RequestMapper.bs.js\";\n\nfunction mapToUser(responseUser) {\n  var value = Belt_Array.get(responseUser.images, 0);\n  return {\n          id: responseUser.id,\n          name: responseUser.display_name,\n          image: value !== undefined ? value.url : \"\"\n        };\n}\n\nfunction mapResponseToItem(response) {\n  var status = response.status;\n  if (status !== 200) {\n    return {\n            TAG: /* Error */1,\n            _0: /* ResponseError */{\n              _0: {\n                message: \"Failed request with $status\"\n              }\n            }\n          };\n  }\n  var response$1 = response.response;\n  if (response$1 !== undefined) {\n    return {\n            TAG: /* Ok */0,\n            _0: mapToUser(response$1)\n          };\n  } else {\n    return {\n            TAG: /* Error */1,\n            _0: /* Empty */0\n          };\n  }\n}\n\nfunction init(token) {\n  var authHeader = Js_dict.fromArray([[\n          \"Authorization\",\n          \"Bearer \" + token\n        ]]);\n  return function (param) {\n    return Future.mapResult(Future.mapError($$Request.make(SpotifyEnv$Spotigen.userUrl, undefined, /* JsonAsAny */5, undefined, Caml_option.some(authHeader), undefined, undefined, undefined, undefined, undefined), true, RequestMapper$Spotigen.mapError), true, mapResponseToItem);\n  };\n}\n\nexport {\n  mapToUser ,\n  mapResponseToItem ,\n  init ,\n  \n}\n/* SpotifyEnv-Spotigen Not a pure module */\n","\n\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as $$Request from \"rescript-request/src/Request.bs.js\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as SpotifyEnv$Spotigen from \"../utils/SpotifyEnv.bs.js\";\nimport * as RequestMapper$Spotigen from \"../utils/RequestMapper.bs.js\";\n\nfunction mapGenresKeyToGenresItem(gKey) {\n  return {\n          TAG: /* Genre */0,\n          _0: {\n            id: gKey,\n            name: gKey.replace(/\\-/g, \" \").toUpperCase()\n          }\n        };\n}\n\nfunction mapResponseToItem(response) {\n  var status = response.status;\n  if (status !== 200) {\n    return {\n            TAG: /* Error */1,\n            _0: /* ResponseError */{\n              _0: {\n                message: \"Failed request with $status\"\n              }\n            }\n          };\n  }\n  var response$1 = response.response;\n  if (response$1 === undefined) {\n    return {\n            TAG: /* Error */1,\n            _0: /* Empty */0\n          };\n  }\n  var genres = Belt_Array.map(response$1.genres, mapGenresKeyToGenresItem);\n  return {\n          TAG: /* Ok */0,\n          _0: genres\n        };\n}\n\nfunction init(token) {\n  var authHeader = Js_dict.fromArray([[\n          \"Authorization\",\n          \"Bearer \" + token\n        ]]);\n  return function (param) {\n    return Future.mapResult(Future.mapError($$Request.make(SpotifyEnv$Spotigen.genresUrl, undefined, /* JsonAsAny */5, undefined, Caml_option.some(authHeader), undefined, undefined, undefined, undefined, undefined), true, RequestMapper$Spotigen.mapError), true, mapResponseToItem);\n  };\n}\n\nexport {\n  mapGenresKeyToGenresItem ,\n  mapResponseToItem ,\n  init ,\n  \n}\n/* SpotifyEnv-Spotigen Not a pure module */\n","\n\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\n\nfunction getSmallestImage(images) {\n  var startImg = {\n    url: \"\",\n    height: 999999\n  };\n  if (images !== undefined) {\n    return Belt_Array.reduce(images, startImg, (function (a, b) {\n                  if (a.height < b.height) {\n                    return a;\n                  } else {\n                    return b;\n                  }\n                }));\n  } else {\n    return startImg;\n  }\n}\n\nfunction mapSearchArtistToItemArtist(artist) {\n  return {\n          id: artist.id,\n          name: artist.name,\n          image: getSmallestImage(artist.images).url\n        };\n}\n\nfunction mapSearchTrackToItemTrack(track) {\n  return {\n          id: track.id,\n          artists: Belt_Array.map(track.artists, mapSearchArtistToItemArtist),\n          name: track.name,\n          image: getSmallestImage(track.album.images).url,\n          uri: track.uri\n        };\n}\n\nexport {\n  getSmallestImage ,\n  mapSearchArtistToItemArtist ,\n  mapSearchTrackToItemTrack ,\n  \n}\n/* No side effect */\n","\n\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as $$Request from \"rescript-request/src/Request.bs.js\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as SpotifyEnv$Spotigen from \"../utils/SpotifyEnv.bs.js\";\nimport * as ModelMapper$Spotigen from \"../utils/ModelMapper.bs.js\";\nimport * as RequestMapper$Spotigen from \"../utils/RequestMapper.bs.js\";\n\nfunction mapResponseToItem(response) {\n  var status = response.status;\n  if (status !== 200) {\n    return {\n            TAG: /* Error */1,\n            _0: /* ResponseError */{\n              _0: {\n                message: \"Failed request with $status\"\n              }\n            }\n          };\n  }\n  var response$1 = response.response;\n  if (response$1 === undefined) {\n    return {\n            TAG: /* Error */1,\n            _0: /* Empty */0\n          };\n  }\n  var artists = Belt_Array.map(Belt_Array.map(response$1.artists.items, ModelMapper$Spotigen.mapSearchArtistToItemArtist), (function (a) {\n          return {\n                  TAG: /* Artist */1,\n                  _0: a\n                };\n        }));\n  var tracks = Belt_Array.map(Belt_Array.map(response$1.tracks.items, ModelMapper$Spotigen.mapSearchTrackToItemTrack), (function (t) {\n          return {\n                  TAG: /* Track */2,\n                  _0: t\n                };\n        }));\n  var firstArtist = Belt_Array.get(artists, 0);\n  var searchResults = firstArtist !== undefined ? Belt_Array.concatMany([\n          [firstArtist],\n          tracks,\n          Belt_Array.sliceToEnd(artists, 1)\n        ]) : tracks;\n  return {\n          TAG: /* Ok */0,\n          _0: searchResults\n        };\n}\n\nfunction init(token) {\n  var authHeader = Js_dict.fromArray([[\n          \"Authorization\",\n          \"Bearer \" + token\n        ]]);\n  return function (query) {\n    var queryParam = String(new URLSearchParams({\n              q: query,\n              type: \"artist,track\",\n              limit: 5\n            }));\n    return Future.mapResult(Future.mapError($$Request.make(SpotifyEnv$Spotigen.searchUrl + queryParam, undefined, /* JsonAsAny */5, undefined, Caml_option.some(authHeader), undefined, undefined, undefined, undefined, undefined), true, RequestMapper$Spotigen.mapError), true, mapResponseToItem);\n  };\n}\n\nexport {\n  mapResponseToItem ,\n  init ,\n  \n}\n/* SpotifyEnv-Spotigen Not a pure module */\n","\n\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as $$Request from \"rescript-request/src/Request.bs.js\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as Belt_HashMapString from \"bs-platform/lib/es6/belt_HashMapString.js\";\nimport * as SpotifyEnv$Spotigen from \"../utils/SpotifyEnv.bs.js\";\nimport * as RequestMapper$Spotigen from \"../utils/RequestMapper.bs.js\";\n\nfunction createPlaylistMapping(response) {\n  var status = response.status;\n  if (status !== 201) {\n    console.log(response);\n    return {\n            TAG: /* Error */1,\n            _0: /* ResponseError */{\n              _0: {\n                message: \"Failed request to create Playlist\"\n              }\n            }\n          };\n  }\n  var response$1 = response.response;\n  if (response$1 !== undefined) {\n    return {\n            TAG: /* Ok */0,\n            _0: Caml_option.valFromOption(response$1)\n          };\n  } else {\n    return {\n            TAG: /* Error */1,\n            _0: /* Empty */0\n          };\n  }\n}\n\nfunction createPlaylist(userId, playlistName, authHeader) {\n  var dict = {};\n  dict[\"name\"] = playlistName;\n  dict[\"public\"] = false;\n  var body = JSON.stringify(dict);\n  console.log(body);\n  return Future.mapResult(Future.mapError($$Request.make(SpotifyEnv$Spotigen.usersUrl + userId + SpotifyEnv$Spotigen.playlistsEndpoint, \"POST\", /* JsonAsAny */5, body, Caml_option.some(authHeader), undefined, undefined, undefined, undefined, undefined), true, RequestMapper$Spotigen.mapError), true, createPlaylistMapping);\n}\n\nfunction getTrackUris(items) {\n  return Belt_Array.keep(Belt_Array.map(items, (function (item) {\n                      switch (item.TAG | 0) {\n                        case /* Genre */0 :\n                        case /* Artist */1 :\n                            return ;\n                        case /* Track */2 :\n                            return item._0.uri;\n                        \n                      }\n                    })), (function (artist) {\n                  return artist !== undefined;\n                })).join(\",\");\n}\n\nfunction generateTrackQueryParam(items) {\n  var queryParam = Belt_HashMapString.fromArray([]);\n  var seedTracks = getTrackUris(items);\n  if (seedTracks.length !== 0) {\n    Belt_HashMapString.set(queryParam, \"uris\", seedTracks);\n  }\n  return String(new URLSearchParams(Belt_HashMapString.toArray(queryParam)));\n}\n\nfunction addTracksMapping(response) {\n  var status = response.status;\n  if (status !== 200) {\n    return {\n            TAG: /* Error */1,\n            _0: /* ResponseError */{\n              _0: {\n                message: \"Failed request to add tracks to playlist\"\n              }\n            }\n          };\n  }\n  var response$1 = response.response;\n  if (response$1 !== undefined) {\n    return {\n            TAG: /* Ok */0,\n            _0: Caml_option.valFromOption(response$1)\n          };\n  } else {\n    return {\n            TAG: /* Error */1,\n            _0: /* Empty */0\n          };\n  }\n}\n\nfunction addTracks(playlistId, items, authHeader) {\n  var query = generateTrackQueryParam(items);\n  return Future.mapResult(Future.mapError($$Request.make(SpotifyEnv$Spotigen.playlistsUrl + playlistId + SpotifyEnv$Spotigen.tracksEndpoint + query, \"POST\", /* JsonAsAny */5, undefined, Caml_option.some(authHeader), undefined, undefined, undefined, undefined, undefined), true, RequestMapper$Spotigen.mapError), true, addTracksMapping);\n}\n\nfunction init(token) {\n  var authHeader = Js_dict.fromArray([[\n          \"Authorization\",\n          \"Bearer \" + token\n        ]]);\n  return function (userId, playlistName, items) {\n    return Future.map(Future.mapOk(createPlaylist(userId, playlistName, authHeader), true, (function (createdPlaylist) {\n                      return addTracks(createdPlaylist.id, items, authHeader);\n                    })), true, (function (param) {\n                  return \"\";\n                }));\n  };\n}\n\nexport {\n  createPlaylistMapping ,\n  createPlaylist ,\n  getTrackUris ,\n  generateTrackQueryParam ,\n  addTracksMapping ,\n  addTracks ,\n  init ,\n  \n}\n/* SpotifyEnv-Spotigen Not a pure module */\n","\n\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as Js_math from \"bs-platform/lib/es6/js_math.js\";\nimport * as $$Request from \"rescript-request/src/Request.bs.js\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as Belt_HashMapString from \"bs-platform/lib/es6/belt_HashMapString.js\";\nimport * as SpotifyEnv$Spotigen from \"../utils/SpotifyEnv.bs.js\";\nimport * as ModelMapper$Spotigen from \"../utils/ModelMapper.bs.js\";\nimport * as RequestMapper$Spotigen from \"../utils/RequestMapper.bs.js\";\n\nfunction mapResponseToItem(response, totalSeedSize) {\n  var status = response.status;\n  if (status !== 200) {\n    return {\n            TAG: /* Error */1,\n            _0: /* ResponseError */{\n              _0: {\n                message: \"Failed request with $status\"\n              }\n            }\n          };\n  }\n  var response$1 = response.response;\n  if (response$1 === undefined) {\n    return {\n            TAG: /* Error */1,\n            _0: /* Empty */0\n          };\n  }\n  var numberOfTracksToSelect = Js_math.ceil_int(response$1.seeds.length / totalSeedSize * response$1.tracks.length);\n  var tracks = Belt_Array.slice(Belt_Array.shuffle(Belt_Array.map(Belt_Array.map(response$1.tracks, ModelMapper$Spotigen.mapSearchTrackToItemTrack), (function (t) {\n                  return {\n                          TAG: /* Track */2,\n                          _0: t\n                        };\n                }))), 0, numberOfTracksToSelect);\n  return {\n          TAG: /* Ok */0,\n          _0: tracks\n        };\n}\n\nfunction getSeedItems(items, itemType) {\n  return Belt_Array.keep(Belt_Array.map(items, (function (item) {\n                      switch (itemType) {\n                        case \"artist\" :\n                            switch (item.TAG | 0) {\n                              case /* Artist */1 :\n                                  return item._0.id;\n                              case /* Genre */0 :\n                              case /* Track */2 :\n                                  return \"\";\n                              \n                            }\n                        case \"genre\" :\n                            switch (item.TAG | 0) {\n                              case /* Genre */0 :\n                                  return item._0.id;\n                              case /* Artist */1 :\n                              case /* Track */2 :\n                                  return \"\";\n                              \n                            }\n                        case \"track\" :\n                            switch (item.TAG | 0) {\n                              case /* Genre */0 :\n                              case /* Artist */1 :\n                                  return \"\";\n                              case /* Track */2 :\n                                  return item._0.id;\n                              \n                            }\n                        default:\n                          return \"\";\n                      }\n                    })), (function (id) {\n                  return id.length !== 0;\n                })).join(\",\");\n}\n\nfunction generateQueryParam(items, amount) {\n  var queryParam = Belt_HashMapString.fromArray([]);\n  Belt_HashMapString.set(queryParam, \"limit\", String(amount));\n  var seedArtists = getSeedItems(items, \"artist\");\n  if (seedArtists.length !== 0) {\n    Belt_HashMapString.set(queryParam, \"seed_artists\", seedArtists);\n  }\n  var seedTracks = getSeedItems(items, \"track\");\n  if (seedTracks.length !== 0) {\n    Belt_HashMapString.set(queryParam, \"seed_tracks\", seedTracks);\n  }\n  var seedGenres = getSeedItems(items, \"genre\");\n  if (seedGenres.length !== 0) {\n    Belt_HashMapString.set(queryParam, \"seed_genres\", seedGenres);\n  }\n  return String(new URLSearchParams(Belt_HashMapString.toArray(queryParam)));\n}\n\nfunction init(token) {\n  var authHeader = Js_dict.fromArray([[\n          \"Authorization\",\n          \"Bearer \" + token\n        ]]);\n  return function (items) {\n    var shuffledItems = Belt_Array.shuffle(items);\n    var requests = Belt_Array.makeBy(Js_math.ceil_int(shuffledItems.length / 5), (function (idx) {\n            var offset = Math.imul(idx, 5);\n            var numberOfRemainingItems = shuffledItems.length - offset | 0;\n            var n = numberOfRemainingItems > 5 ? 5 : numberOfRemainingItems;\n            var subset = Belt_Array.slice(shuffledItems, offset, n);\n            var queryParam = generateQueryParam(subset, 20);\n            return $$Request.make(SpotifyEnv$Spotigen.recommendationUrl + queryParam, undefined, /* JsonAsAny */5, undefined, Caml_option.some(authHeader), undefined, undefined, undefined, undefined, undefined);\n          }));\n    return Future.map(Future.all(requests), undefined, (function (results) {\n                  var resultMap = Belt_Array.map(results, (function (result) {\n                          if (result.TAG === /* Ok */0) {\n                            return mapResponseToItem(result._0, items.length);\n                          } else {\n                            return {\n                                    TAG: /* Error */1,\n                                    _0: RequestMapper$Spotigen.mapError(result._0)\n                                  };\n                          }\n                        }));\n                  var err = resultMap.find(function (result) {\n                        if (result.TAG === /* Ok */0) {\n                          return false;\n                        } else {\n                          return true;\n                        }\n                      });\n                  if (err !== undefined) {\n                    return err;\n                  } else {\n                    return {\n                            TAG: /* Ok */0,\n                            _0: Belt_Array.concatMany(Belt_Array.map(resultMap, (function (result) {\n                                        if (result.TAG === /* Ok */0) {\n                                          return result._0;\n                                        } else {\n                                          return [];\n                                        }\n                                      })))\n                          };\n                  }\n                }));\n  };\n}\n\nexport {\n  mapResponseToItem ,\n  getSeedItems ,\n  generateQueryParam ,\n  init ,\n  \n}\n/* SpotifyEnv-Spotigen Not a pure module */\n","\n\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Js_dict from \"bs-platform/lib/es6/js_dict.js\";\nimport * as $$Request from \"rescript-request/src/Request.bs.js\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as SpotifyEnv$Spotigen from \"../utils/SpotifyEnv.bs.js\";\nimport * as ModelMapper$Spotigen from \"../utils/ModelMapper.bs.js\";\nimport * as RequestMapper$Spotigen from \"../utils/RequestMapper.bs.js\";\n\nfunction mapTrackResponseToItem(response) {\n  var status = response.status;\n  if (status !== 200) {\n    return {\n            TAG: /* Error */1,\n            _0: /* ResponseError */{\n              _0: {\n                message: \"Failed request with $status\"\n              }\n            }\n          };\n  }\n  var responseBody = response.response;\n  if (responseBody !== undefined) {\n    return {\n            TAG: /* Ok */0,\n            _0: Belt_Array.map(Belt_Array.map(responseBody.items, ModelMapper$Spotigen.mapSearchTrackToItemTrack), (function (t) {\n                    return {\n                            TAG: /* Track */2,\n                            _0: t\n                          };\n                  }))\n          };\n  } else {\n    return {\n            TAG: /* Error */1,\n            _0: /* Empty */0\n          };\n  }\n}\n\nfunction mapArtistResponseToItem(response) {\n  var status = response.status;\n  if (status !== 200) {\n    return {\n            TAG: /* Error */1,\n            _0: /* ResponseError */{\n              _0: {\n                message: \"Failed request with $status\"\n              }\n            }\n          };\n  }\n  var responseBody = response.response;\n  if (responseBody !== undefined) {\n    return {\n            TAG: /* Ok */0,\n            _0: Belt_Array.map(Belt_Array.map(responseBody.items, ModelMapper$Spotigen.mapSearchArtistToItemArtist), (function (a) {\n                    return {\n                            TAG: /* Artist */1,\n                            _0: a\n                          };\n                  }))\n          };\n  } else {\n    return {\n            TAG: /* Error */1,\n            _0: /* Empty */0\n          };\n  }\n}\n\nvar queryParam = String(new URLSearchParams({\n          limit: 10\n        }));\n\nfunction initTopTracks(token) {\n  var authHeader = Js_dict.fromArray([[\n          \"Authorization\",\n          \"Bearer \" + token\n        ]]);\n  return function (param) {\n    return Future.mapResult(Future.mapError($$Request.make(SpotifyEnv$Spotigen.topTracksEndpoint + queryParam, undefined, /* JsonAsAny */5, undefined, Caml_option.some(authHeader), undefined, undefined, undefined, undefined, undefined), true, RequestMapper$Spotigen.mapError), true, mapTrackResponseToItem);\n  };\n}\n\nfunction initTopArtist(token) {\n  var authHeader = Js_dict.fromArray([[\n          \"Authorization\",\n          \"Bearer \" + token\n        ]]);\n  return function (param) {\n    return Future.mapResult(Future.mapError($$Request.make(SpotifyEnv$Spotigen.topArtistsEndpoint + queryParam, undefined, /* JsonAsAny */5, undefined, Caml_option.some(authHeader), undefined, undefined, undefined, undefined, undefined), true, RequestMapper$Spotigen.mapError), true, mapArtistResponseToItem);\n  };\n}\n\nexport {\n  mapTrackResponseToItem ,\n  mapArtistResponseToItem ,\n  queryParam ,\n  initTopTracks ,\n  initTopArtist ,\n  \n}\n/* queryParam Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Recoil from \"recoil\";\nimport * as Belt_Array from \"bs-platform/lib/es6/belt_Array.js\";\nimport * as Core from \"@material-ui/core\";\nimport * as ItemUtil$Spotigen from \"../../util/ItemUtil.bs.js\";\nimport * as UserState$Spotigen from \"../../state/UserState.bs.js\";\nimport * as MaterialUi_TextField from \"@jsiebern/bs-material-ui/src/MaterialUi_TextField.bs.js\";\nimport * as ItemComponent$Spotigen from \"../item/ItemComponent.bs.js\";\nimport ArrowBack from \"@material-ui/icons/ArrowBack\";\nimport * as RecommendationsState$Spotigen from \"../../state/RecommendationsState.bs.js\";\n\nfunction Recommendations(Props) {\n  var spotifyClient = Props.spotifyClient;\n  var onPlaylistCreated = Props.onPlaylistCreated;\n  var match = React.useState(function () {\n        return \"\";\n      });\n  var setPlaylistName = match[1];\n  var playlistName = match[0];\n  var match$1 = Recoil.useRecoilState(RecommendationsState$Spotigen.recommendationsState);\n  var setItems = match$1[1];\n  var items = match$1[0];\n  var user = Recoil.useRecoilValue(UserState$Spotigen.userState);\n  var changePlaylistName = function ($$event) {\n    return Curry._1(setPlaylistName, $$event.target.value);\n  };\n  var goBack = function (param) {\n    return Curry._1(setItems, (function (param) {\n                  return [];\n                }));\n  };\n  var createPlaylist = function (param) {\n    return Future.get(Curry._3(spotifyClient.createPlaylist, user.id, playlistName, items), (function (response) {\n                  Curry._1(setItems, (function (param) {\n                          return [];\n                        }));\n                  return Curry._1(onPlaylistCreated, undefined);\n                }));\n  };\n  return React.createElement(\"div\", undefined, React.createElement(Core.Button, {\n                  onClick: goBack,\n                  children: \"Back to selection\",\n                  startIcon: React.createElement(ArrowBack, {})\n                }), React.createElement(Core.Typography, {\n                  children: \"Recommendations\",\n                  variant: \"h4\"\n                }), React.createElement(\"div\", {\n                  className: \"hbox\",\n                  style: {\n                    margin: \"16px auto\"\n                  }\n                }, React.createElement(Core.TextField, {\n                      style: {\n                        marginRight: \"8px\",\n                        flex: \"1\"\n                      },\n                      onChange: changePlaylistName,\n                      placeholder: \"Playlist Name\",\n                      value: MaterialUi_TextField.Value.string(playlistName),\n                      variant: \"outlined\"\n                    }), React.createElement(Core.Button, {\n                      onClick: createPlaylist,\n                      children: \"Save in Spotify\",\n                      color: \"primary\",\n                      disabled: playlistName.length === 0,\n                      variant: \"contained\"\n                    })), Belt_Array.map(items, (function (item) {\n                    var match = ItemUtil$Spotigen.extractItemInfo(item);\n                    return React.createElement(ItemComponent$Spotigen.make, {\n                                item: item,\n                                showGenreLabel: false,\n                                control: null,\n                                key: match[1]\n                              });\n                  })));\n}\n\nvar make = Recommendations;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Future from \"rescript-future/src/Future.bs.js\";\nimport * as Recoil from \"recoil\";\nimport * as Lab from \"@material-ui/lab\";\nimport * as MaterialUi_Types from \"@jsiebern/bs-material-ui/src/MaterialUi_Types.bs.js\";\nimport * as Core from \"@material-ui/core\";\nimport * as Creation$Spotigen from \"../creation/Creation.bs.js\";\nimport * as UserState$Spotigen from \"../../state/UserState.bs.js\";\nimport * as TokenState$Spotigen from \"../../state/TokenState.bs.js\";\nimport * as SpotifyService$Spotigen from \"../../services/SpotifyService.bs.js\";\nimport * as Recommendations$Spotigen from \"../recommendations/Recommendations.bs.js\";\nimport * as RecommendationsState$Spotigen from \"../../state/RecommendationsState.bs.js\";\n\nfunction Dashboard(Props) {\n  var token = Recoil.useRecoilValue(TokenState$Spotigen.tokenState);\n  var recommendations = Recoil.useRecoilValue(RecommendationsState$Spotigen.recommendationsState);\n  var match = Recoil.useRecoilState(UserState$Spotigen.userState);\n  var setUser = match[1];\n  var match$1 = React.useState(function () {\n        return \"\";\n      });\n  var setSnackbarMessage = match$1[1];\n  var snackbarMessage = match$1[0];\n  var spotifyClient = SpotifyService$Spotigen.init(token);\n  React.useEffect((function () {\n          Future.get(Curry._1(spotifyClient.getUser, undefined), (function (response) {\n                  if (response.TAG === /* Ok */0) {\n                    var user = response._0;\n                    return Curry._1(setUser, (function (param) {\n                                  return user;\n                                }));\n                  }\n                  console.log(response._0);\n                  \n                }));\n          \n        }), []);\n  var handleAlertClose = function (param) {\n    return Curry._1(setSnackbarMessage, (function (param) {\n                  return \"\";\n                }));\n  };\n  var handleClose = function (param, param$1) {\n    return Curry._1(setSnackbarMessage, (function (param) {\n                  return \"\";\n                }));\n  };\n  var onPlaylistCreated = function (param) {\n    return Curry._1(setSnackbarMessage, (function (param) {\n                  return \"PLAYLIST_CREATED\";\n                }));\n  };\n  var onSeedTooSmall = function (param) {\n    return Curry._1(setSnackbarMessage, (function (param) {\n                  return \"NO_CONTENT\";\n                }));\n  };\n  var match$2;\n  switch (snackbarMessage) {\n    case \"NO_CONTENT\" :\n        match$2 = [\n          \"Error\",\n          \"More seed items required\"\n        ];\n        break;\n    case \"PLAYLIST_CREATED\" :\n        match$2 = [\n          \"Success\",\n          \"Playlist created\"\n        ];\n        break;\n    default:\n      match$2 = [\n        \"Error\",\n        \"Unknown error\"\n      ];\n  }\n  return React.createElement(\"div\", undefined, recommendations.length !== 0 ? React.createElement(Recommendations$Spotigen.make, {\n                    spotifyClient: spotifyClient,\n                    onPlaylistCreated: onPlaylistCreated\n                  }) : React.createElement(Creation$Spotigen.make, {\n                    spotifyClient: spotifyClient,\n                    onSeedTooSmall: onSeedTooSmall\n                  }), React.createElement(Core.Snackbar, {\n                  autoHideDuration: MaterialUi_Types.$$Number.$$int(6000),\n                  children: React.createElement(Lab.Alert, {\n                        children: match$2[1],\n                        onClose: handleAlertClose,\n                        severity: (function () {\n                              switch (match$2[0]) {\n                                case \"Error\" :\n                                    return \"error\";\n                                case \"Info\" :\n                                    return \"info\";\n                                case \"Success\" :\n                                    return \"success\";\n                                case \"Warning\" :\n                                    return \"warning\";\n                                \n                              }\n                            })()\n                      }),\n                  onClose: handleClose,\n                  open: snackbarMessage.length !== 0\n                }));\n}\n\nvar make = Dashboard;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as UserService$Spotigen from \"./user/UserService.bs.js\";\nimport * as GenresService$Spotigen from \"./genres/GenresService.bs.js\";\nimport * as SearchService$Spotigen from \"./search/SearchService.bs.js\";\nimport * as PlaylistService$Spotigen from \"./playlist/PlaylistService.bs.js\";\nimport * as RecommendationService$Spotigen from \"./recomendations/RecommendationService.bs.js\";\nimport * as PersonalizationService$Spotigen from \"./personalization/PersonalizationService.bs.js\";\n\nfunction init(token) {\n  return {\n          getSearch: SearchService$Spotigen.init(token),\n          getGenres: GenresService$Spotigen.init(token),\n          getRecommendation: RecommendationService$Spotigen.init(token),\n          createPlaylist: PlaylistService$Spotigen.init(token),\n          getUser: UserService$Spotigen.init(token),\n          getTopTracks: PersonalizationService$Spotigen.initTopTracks(token),\n          getTopArtists: PersonalizationService$Spotigen.initTopArtist(token)\n        };\n}\n\nexport {\n  init ,\n  \n}\n/* UserService-Spotigen Not a pure module */\n","\n\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Recoil from \"recoil\";\nimport * as Auth$Spotigen from \"../auth/Auth.bs.js\";\nimport * as About$Spotigen from \"../about/About.bs.js\";\nimport * as Header$Spotigen from \"../header/Header.bs.js\";\nimport * as Core from \"@material-ui/core\";\nimport * as Dashboard$Spotigen from \"../dashboard/Dashboard.bs.js\";\nimport * as TokenState$Spotigen from \"../../state/TokenState.bs.js\";\nimport * as MaterialUi_Container from \"@jsiebern/bs-material-ui/src/MaterialUi_Container.bs.js\";\nimport * as AuthorizationService$Spotigen from \"../../services/authorization/AuthorizationService.bs.js\";\n\nfunction MainContainer(Props) {\n  var match = Recoil.useRecoilState(TokenState$Spotigen.tokenState);\n  var setToken = match[1];\n  var token = match[0];\n  React.useEffect((function () {\n          var token = AuthorizationService$Spotigen.getTokenFromCallback(undefined);\n          if (token !== undefined) {\n            Curry._1(setToken, (function (param) {\n                    return token;\n                  }));\n          } else {\n            Curry._1(setToken, (function (param) {\n                    return \"\";\n                  }));\n          }\n          \n        }), []);\n  return React.createElement(\"div\", {\n              className: \"main-container\"\n            }, React.createElement(\"div\", {\n                  className: \"content\"\n                }, React.createElement(Header$Spotigen.make, {\n                      authenticated: token.length !== 0\n                    }), React.createElement(Core.Container, {\n                      children: token.length !== 0 ? React.createElement(Dashboard$Spotigen.make, {}) : React.createElement(Auth$Spotigen.make, {}),\n                      maxWidth: MaterialUi_Container.MaxWidth.sm\n                    })), React.createElement(About$Spotigen.make, {}));\n}\n\nvar make = MainContainer;\n\nexport {\n  make ,\n  \n}\n/* react Not a pure module */\n","\n\nimport * as React from \"react\";\nimport * as Recoil from \"recoil\";\nimport * as MainContainer$Spotigen from \"../main/MainContainer.bs.js\";\n\nimport './App.css';\n;\n\nfunction App(Props) {\n  return React.createElement(Recoil.RecoilRoot, {\n              children: React.createElement(MainContainer$Spotigen.make, {})\n            });\n}\n\nvar make = App;\n\nexport {\n  make ,\n  \n}\n/*  Not a pure module */\n","\n\nimport * as React from \"react\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\nimport * as App$Spotigen from \"../app/App.bs.js\";\nimport * as ReactDomExperimental$Spotigen from \"../../bindings/ReactDomExperimental.bs.js\";\n\nimport './Index.css';\n;\n\nvar root = ReactDomExperimental$Spotigen.createRootWithId(\"root\");\n\nif (root !== undefined) {\n  Caml_option.valFromOption(root).render(React.createElement(React.StrictMode, {\n            children: React.createElement(App$Spotigen.make, {})\n          }));\n}\n\nexport {\n  \n}\n/*  Not a pure module */\n","\n\nimport * as ReactDom from \"react-dom\";\nimport * as Caml_option from \"bs-platform/lib/es6/caml_option.js\";\n\nfunction createRootWithId(id) {\n  var element = document.getElementById(id);\n  if (!(element == null)) {\n    return Caml_option.some(ReactDom.unstable_createRoot(element));\n  }\n  \n}\n\nfunction createBlockingRootWithId(id) {\n  var element = document.getElementById(id);\n  if (!(element == null)) {\n    return Caml_option.some(ReactDom.unstable_createBlockingRoot(element));\n  }\n  \n}\n\nexport {\n  createRootWithId ,\n  createBlockingRootWithId ,\n  \n}\n/* react-dom Not a pure module */\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import './components/index/Index.bs';\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nimport reportWebVitals from './reportWebVitals';\nreportWebVitals();\n"],"sourceRoot":""}