(this["webpackJsonpspotify-recommendations"]=this["webpackJsonpspotify-recommendations"]||[]).push([[0],{84:function(e,t,n){},89:function(e,t,n){},92:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(7),i=n(10),c=n(2),o=n(138),u=n(134),l=n(98),s=n(133),m=n(144);n(84);var d=function(e){var t=e.name,n=e.image,i=e.item;return r.createElement("div",{className:"person"},void 0!==n?r.createElement(m.a,{alt:t,src:n}):r.createElement(m.a,{children:t[0]}),r.createElement("div",{className:"person-name"},void 0!==i?a.b(i):r.createElement(l.a,{children:t})))},f=i.b({key:"userState",default:{id:"guest",name:"Guest",image:""}}),v=i.b({key:"tokenState",default:""});var g=function(e){var t=i.c(v)[1],n=i.d(f);return r.createElement("div",{className:"hbox"},r.createElement(d,{name:n.name,image:n.image,item:r.createElement(l.a,{children:null},n.name+" | ",r.createElement(s.a,{children:"Logout",onClick:function(e){return e.preventDefault(),c.a(t,(function(e){return""}))},href:"#"}))}))};n(89);var h=function(e){var t=e.authenticated;return r.createElement("div",{className:"header"},r.createElement(l.a,{children:"spotigen"}),t?r.createElement(g,{}):null)},p=n(6),E=n(20),y=n(65),_="sessionId";function b(e){var t=localStorage.getItem(_);if(null!==t)return t;var n=y();return localStorage.setItem(_,n),n}var G="https://accounts.spotify.com/authorize?"+String(new URLSearchParams({client_id:"2e53e2a82ee64c4dbf48f4936ae1bb02",response_type:"token",redirect_uri:"http://localhost:3000/",scope:"playlist-modify-private",state:b()}));var S=function(e){return r.createElement("div",void 0,r.createElement(h,{authenticated:!1}),r.createElement("p",void 0,"By connecting your Spotify account, you agree to our Privacy Policy"),r.createElement(u.a,{onClick:function(e){window.location.replace(G)},children:"Login with Spotify"}))},T=n(66),A=n(13),k=n(141),C=n(44),w=n(143);var N=function(e){return r.createElement("div",{style:{marginTop:"32px"}},r.createElement(l.a,{children:"Created by"}),r.createElement(d,{name:"Damien Jochim",image:"https://pbs.twimg.com/profile_images/1284521496438874112/LDA9UyiN_400x400.jpg",item:r.createElement(s.a,{children:"@damien_jochim",href:"https://twitter.com/damien_jochim",target:"_blank"})}),r.createElement(d,{name:"Stefan Blamberg",image:"https://pbs.twimg.com/profile_images/1328445229221949442/1uPmXD13_400x400.jpg",item:r.createElement(s.a,{children:"@StefanBlamberg",href:"https://twitter.com/StefanBlamberg",target:"_blank"})}))},P=n(67),L=n(140),B=n(137),R=n(139),j=n(36);function x(e){return[e,e._0.id]}var F=n(135),q=n(69),U=n.n(q),z=n(68),D=n.n(z);n(92);var $=function(e){var t,n=e.item,a=e.showGenreLabel,i=e.control;switch(0|n.TAG){case 0:t=[n._0.name,"",a?"Genre":""];break;case 1:var c=n._0;t=[c.name,c.image,"Artist"];break;case 2:var o=n._0;t=[o.name,o.image,"Track by "+p.d(o.artists,", ",(function(e){return e.name}))]}var u=t[2],s=t[1],d=t[0],f=""===s?r.createElement(m.a,{children:d[0],className:"cover",variant:"square"}):r.createElement("img",{className:"cover",src:s}),v=""===u?null:r.createElement(l.a,{children:u,className:"description"});return r.createElement("div",{className:"item"},f,r.createElement("div",{className:"caption"},r.createElement(l.a,{children:d}),v),i)},I=i.b({key:"selectionState",default:[]});var J=function(e){var t=e.item,n=e.added,a=i.c(I)[1],o=n?r.createElement(F.a,{onClick:function(e){var n=x(t)[1];return c.a(a,(function(e){return p.e(e,(function(e){return x(e)[1]!==n}))}))},children:r.createElement(D.a,{})}):r.createElement(F.a,{onClick:function(e){return c.a(a,(function(e){return p.a(e,[t])}))},children:r.createElement(U.a,{})});return r.createElement($,{item:t,showGenreLabel:!1,control:o})};var O=function(e){var t=e.spotifyClient,n=r.useState((function(){return[]})),a=n[1],o=r.useState((function(){return""})),u=o[1],s=o[0],m=i.c(I)[0];return r.useEffect((function(){A.a(c.a(t.getGenres,void 0),(function(e){if(0===e.TAG){var t=e._0;return c.a(a,(function(e){return t}))}console.log(e._0)}))}),[]),r.createElement("div",void 0,r.createElement("form",{autoComplete:"off"},r.createElement(R.a,{className:"input",onChange:function(e){return c.a(u,e.target.value)},placeholder:"Search",value:j.a.string(s),variant:"outlined"})),r.createElement("div",{className:"spacing"},0!==s.length?p.g(p.e(p.g(n[0],x),(function(e){return""!==s&&e[1].includes(s)})),(function(e){var t=e[1],n=p.j(m,(function(e){return x(e)[1]===t}));return r.createElement(J,{item:e[0],added:n,key:t})})):r.createElement(l.a,{children:"Enter a search term to select genres",style:{color:"grey"}})))};var W=function(e){var t=e.spotifyClient,n=r.useState((function(){return""})),a=n[1],o=n[0],u=function(e,t){var n=r.useState((function(){return e})),a=n[1];return r.useEffect((function(){var n=setTimeout((function(t){return c.a(a,(function(t){return e}))}),t);return function(e){clearTimeout(n)}}),[e]),n[0]}(o,400),s=r.useState((function(){return[]})),m=s[1],d=s[0],f=i.c(I)[0];return r.useEffect((function(){""===u?c.a(m,(function(e){return[]})):A.a(c.a(t.getSearch,u),(function(e){if(0===e.TAG){var t=e._0;return c.a(m,(function(e){return t}))}console.log(e._0)}))}),[u]),r.createElement("div",void 0,r.createElement("form",{autoComplete:"off"},r.createElement(R.a,{className:"input",onChange:function(e){return c.a(a,e.target.value)},placeholder:"Search",value:j.a.string(o),variant:"outlined"})),r.createElement("div",{className:"spacing"},0!==d.length?p.g(d,(function(e){var t=x(e)[1],n=p.j(f,(function(e){return x(e)[1]===t}));return r.createElement(J,{item:e,added:n,key:t})})):r.createElement(l.a,{children:"Enter a search term to select items",style:{color:"grey"}})))},H=n(70),M=n.n(H);var X=function(e){var t=e.item,n=e.id,a=e.onRemove;return r.createElement($,{item:t,showGenreLabel:!0,control:r.createElement(F.a,{onClick:function(e){return c.a(a,n)},children:r.createElement(M.a,{})})})};var Y=function(e){var t=i.c(I),n=t[1],a=t[0],o=function(e){return c.a(n,(function(t){return p.e(t,(function(t){return x(t)[1]!==e}))}))};return r.createElement("div",{className:"spacing"},0!==a.length?p.g(a,(function(e){var t=x(e)[1];return r.createElement(X,{item:e,id:t,onRemove:o,key:t})})):r.createElement(l.a,{children:"Select at least one item to generate recommendations",style:{color:"grey"}}))},K=i.b({key:"recommendationsState",default:[]});var Q=function(e){var t=e.spotifyClient,n=r.useState((function(){return 0})),a=n[1],o=n[0],s=i.d(I),m=i.c(K)[1];return r.createElement("div",void 0,r.createElement(l.a,{children:"Get started",className:"spacing",variant:"h4"}),r.createElement(l.a,{children:"Choose tracks, genres and artists as a base for your recommendations"}),r.createElement(L.a,{centered:!0,children:null,className:"spacing",indicatorColor:"primary",onChange:function(e,t){return c.a(a,(function(e){return P.a(t)}))},textColor:"primary",value:o,variant:"fullWidth"},r.createElement(B.a,{label:"Search"}),r.createElement(B.a,{label:"Genres"})),0!==o?1!==o?null:r.createElement(O,{spotifyClient:t}):r.createElement(W,{spotifyClient:t}),r.createElement(l.a,{children:"Your selection",variant:"h4"}),r.createElement(Y,{}),r.createElement(u.a,{onClick:function(e){return A.a(c.a(t.getRecommendation,s),(function(e){if(0===e.TAG){var t=e._0;return c.a(m,(function(e){return t}))}console.log(e._0)}))},children:"Generate recommendations",color:"primary",disabled:0===s.length,variant:"contained"}))},V=n(21),Z=n(23);function ee(e){return"Timeout"===e?2:1}function te(e){var t=p.c(e.images,0);return{id:e.id,name:e.display_name,image:void 0!==t?t.url:""}}function ne(e){if(200!==e.status)return{TAG:1,_0:{_0:{message:"Failed request with $status"}}};var t=e.response;return void 0!==t?{TAG:0,_0:te(t)}:{TAG:1,_0:0}}function re(e){var t=V.b([["Authorization","Bearer "+e]]);return function(e){return A.f(A.d(Z.a("https://api.spotify.com/v1/me",void 0,5,void 0,a.a(t),void 0,void 0,void 0,void 0,void 0),!0,ee),!0,ne)}}function ae(e){return{TAG:0,_0:{id:e,name:e.replace(/\-/g," ").toUpperCase()}}}function ie(e){if(200!==e.status)return{TAG:1,_0:{_0:{message:"Failed request with $status"}}};var t=e.response;return void 0===t?{TAG:1,_0:0}:{TAG:0,_0:p.g(t.genres,ae)}}function ce(e){var t=V.b([["Authorization","Bearer "+e]]);return function(e){return A.f(A.d(Z.a("https://api.spotify.com/v1/recommendations/available-genre-seeds",void 0,5,void 0,a.a(t),void 0,void 0,void 0,void 0,void 0),!0,ee),!0,ie)}}function oe(e){var t={url:"",height:999999};return void 0!==e?p.h(e,t,(function(e,t){return e.height<t.height?e:t})):t}function ue(e){return{id:e.id,name:e.name,image:oe(e.images).url}}function le(e){return{id:e.id,artists:p.g(e.artists,ue),name:e.name,image:oe(e.album.images).url,uri:e.uri}}function se(e){if(200!==e.status)return{TAG:1,_0:{_0:{message:"Failed request with $status"}}};var t=e.response;if(void 0===t)return{TAG:1,_0:0};var n=p.g(p.g(t.artists.items,ue),(function(e){return{TAG:1,_0:e}})),r=p.g(p.g(t.tracks.items,le),(function(e){return{TAG:2,_0:e}}));return{TAG:0,_0:p.a(n,r)}}function me(e){var t=V.b([["Authorization","Bearer "+e]]);return function(e){var n=String(new URLSearchParams({q:e,type:"artist,track",limit:5}));return A.f(A.d(Z.a("https://api.spotify.com/v1/search?"+n,void 0,5,void 0,a.a(t),void 0,void 0,void 0,void 0,void 0),!0,ee),!0,se)}}function de(e){if(201!==e.status)return console.log(e),{TAG:1,_0:{_0:{message:"Failed request to create Playlist"}}};var t=e.response;return void 0!==t?{TAG:0,_0:a.b(t)}:{TAG:1,_0:0}}function fe(e){var t=E.a([]),n=function(e){return p.e(p.g(e,(function(e){switch(0|e.TAG){case 0:case 1:return;case 2:return e._0.uri}})),(function(e){return void 0!==e})).join(",")}(e);return 0!==n.length&&E.c(t,"uris",n),String(new URLSearchParams(E.d(t)))}function ve(e){if(200!==e.status)return{TAG:1,_0:{_0:{message:"Failed request to add tracks to playlist"}}};var t=e.response;return void 0!==t?{TAG:0,_0:a.b(t)}:{TAG:1,_0:0}}function ge(e){var t=V.b([["Authorization","Bearer "+e]]);return function(e,n,r){return A.c(A.e(function(e,t,n){var r={};r.name=t,r.public=!1;var i=JSON.stringify(r);return console.log(i),A.f(A.d(Z.a("https://api.spotify.com/v1/users/"+e+"/playlists","POST",5,i,a.a(n),void 0,void 0,void 0,void 0,void 0),!0,ee),!0,de)}(e,n,t),!0,(function(e){return function(e,t,n){var r=fe(t);return A.f(A.d(Z.a("https://api.spotify.com/v1/playlists/"+e+"/tracks?"+r,"POST",5,void 0,a.a(n),void 0,void 0,void 0,void 0,void 0),!0,ee),!0,ve)}(e.id,r,t)})),!0,(function(e){return""}))}}function he(e){if(200!==e.status)return{TAG:1,_0:{_0:{message:"Failed request with $status"}}};var t=e.response;return void 0===t?{TAG:1,_0:0}:{TAG:0,_0:p.g(p.g(t.tracks,le),(function(e){return{TAG:2,_0:e}}))}}function pe(e){var t=E.a([]),n=function(e){return p.e(p.g(e,(function(e){switch(0|e.TAG){case 1:return e._0.id;case 0:case 2:return}})),(function(e){return void 0!==e})).join(",")}(e);0!==n.length&&E.c(t,"seed_artists",n);var r=function(e){return p.e(p.g(e,(function(e){switch(0|e.TAG){case 0:case 1:return;case 2:return e._0.id}})),(function(e){return void 0!==e})).join(",")}(e);0!==r.length&&E.c(t,"seed_tracks",r);var a=function(e){return p.e(p.g(e,(function(e){switch(0|e.TAG){case 0:return e._0.id;case 1:case 2:return}})),(function(e){return void 0!==e})).join(",")}(e);return 0!==a.length&&E.c(t,"seed_genres",a),String(new URLSearchParams(E.d(t)))}function Ee(e){var t=V.b([["Authorization","Bearer "+e]]);return function(e){var n=pe(e);return A.f(A.d(Z.a("https://api.spotify.com/v1/recommendations?"+n,void 0,5,void 0,a.a(t),void 0,void 0,void 0,void 0,void 0),!0,ee),!0,he)}}var ye=function(e){var t=e.spotifyClient,n=e.onPlaylistCreated,a=r.useState((function(){return""})),o=a[1],s=a[0],m=i.c(K),d=m[1],v=m[0],g=i.d(f);return r.createElement("div",void 0,r.createElement(u.a,{onClick:function(e){return c.a(d,(function(e){return[]}))},children:"<- Back to selection"}),r.createElement(l.a,{children:"Recommendations",variant:"h4"}),r.createElement("div",{className:"hbox",style:{margin:"16px auto"}},r.createElement(R.a,{style:{marginRight:"8px",flex:"1"},onChange:function(e){return c.a(o,e.target.value)},placeholder:"Playlist Name",value:j.a.string(s),variant:"outlined"}),r.createElement(u.a,{onClick:function(e){return A.a(c.b(t.createPlaylist,g.id,s,v),(function(e){return c.a(d,(function(e){return[]})),c.a(n,void 0)}))},children:"Save in Spotify",color:"primary",disabled:0===s.length,variant:"contained"})),p.g(v,(function(e){var t=x(e);return r.createElement($,{item:e,showGenreLabel:!1,control:null,key:t[1]})})))};var _e=function(e){var t=i.d(v),n=i.d(K),a=i.c(f)[1],o=r.useState((function(){return!1})),u=o[1],l=function(e){return{getSearch:me(e),getGenres:ce(e),getRecommendation:Ee(e),createPlaylist:ge(e),getUser:re(e)}}(t);return r.useEffect((function(){A.a(c.a(l.getUser,void 0),(function(e){if(0===e.TAG){var t=e._0;return c.a(a,(function(e){return t}))}console.log(e._0)}))}),[]),r.createElement("div",void 0,r.createElement(h,{authenticated:!0}),0!==n.length?r.createElement(ye,{spotifyClient:l,onPlaylistCreated:function(e){return c.a(u,(function(e){return!0}))}}):r.createElement(Q,{spotifyClient:l}),r.createElement(N,{}),r.createElement(w.a,{autoHideDuration:C.a.$$int(6e3),children:r.createElement(k.a,{children:"Playlist saved",onClose:function(e){return c.a(u,(function(e){return!1}))},severity:"success"}),onClose:function(e,t){return c.a(u,(function(e){return!1}))},open:o[0]}))};var be=function(e){var t=i.c(v),n=t[1];return r.useEffect((function(){var e=function(e){var t=E.a(p.g(p.e(p.g(window.location.hash.slice(1).split("&"),(function(e){return e.split("=")})),(function(e){return 2===e.length})),(function(e){return[e[0],String(e[1])]}))),n=E.b(t,"state");if(void 0!==n&&n===b()){var r=E.b(t,"access_token");return void 0!==r?r:void 0}}();void 0!==e?c.a(n,(function(t){return e})):c.a(n,(function(e){return""}))}),[]),r.createElement(o.a,{children:0!==t[0].length?r.createElement(_e,{}):r.createElement(S,{}),maxWidth:T.a.sm})};n(95);var Ge=function(e){return r.createElement(i.a,{children:r.createElement(be,{})})},Se=n(15);n(96);var Te=function(e){var t=document.getElementById(e);if(null!=t)return a.a(Se.unstable_createRoot(t))}("root");void 0!==Te&&a.b(Te).render(r.createElement(r.StrictMode,{children:r.createElement(Ge,{})}));(function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))})()}},[[97,1,2]]]);
//# sourceMappingURL=main.12fa2ea2.chunk.js.map